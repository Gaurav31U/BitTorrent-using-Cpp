<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="1345pt" height="535pt"
 viewBox="0.00 0.00 1344.50 535.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 531)">
<title>%3</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-531 1340.5,-531 1340.5,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_models</title>
<polygon fill="none" stroke="grey" stroke-dasharray="5,2" points="412,-8 412,-155 745,-155 745,-8 412,-8"/>
<text text-anchor="middle" x="462.5" y="-139.8" font-family="Times,serif" font-size="14.00">Data Structures</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_utils</title>
<polygon fill="none" stroke="blue" stroke-dasharray="1,5" points="8,-8 8,-155 356,-155 356,-8 8,-8"/>
<text text-anchor="middle" x="53.5" y="-139.8" font-family="Times,serif" font-size="14.00">Utils / Helper</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_net</title>
<polygon fill="none" stroke="red" stroke-dasharray="1,5" points="801,-13.5 801,-149.5 987,-149.5 987,-13.5 801,-13.5"/>
<text text-anchor="middle" x="850.5" y="-134.3" font-family="Times,serif" font-size="14.00">Network Layer</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_client</title>
<polygon fill="none" stroke="black" stroke-width="2" points="461,-209 461,-411 689,-411 689,-209 461,-209"/>
<text text-anchor="middle" x="523" y="-395.8" font-family="Times,serif" font-size="14.00">Client (Core Logic)</text>
</g>
<!-- TorrentInfo -->
<g id="node1" class="node">
<title>TorrentInfo</title>
<polygon fill="lightgrey" stroke="black" points="581.5,-124 420.5,-124 420.5,-16 581.5,-16 581.5,-124"/>
<polygon fill="#fff8dc" stroke="transparent" points="428.5,-20 428.5,-120 573.5,-120 573.5,-20 428.5,-20"/>
<polygon fill="none" stroke="black" points="429,-103 429,-120 574,-120 574,-103 429,-103"/>
<text text-anchor="start" x="432" y="-110" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="10.00">TorrentInfo</text>
<polygon fill="none" stroke="black" points="429,-20 429,-103 574,-103 574,-20 429,-20"/>
<text text-anchor="start" x="460.5" y="-92" font-family="Helvetica,sans-Serif" font-size="10.00">+ announce: string</text>
<text text-anchor="start" x="461" y="-81" font-family="Helvetica,sans-Serif" font-size="10.00">+ length: long long</text>
<text text-anchor="start" x="447" y="-70" font-family="Helvetica,sans-Serif" font-size="10.00">+ piece_length: long long</text>
<text text-anchor="start" x="447" y="-59" font-family="Helvetica,sans-Serif" font-size="10.00">+ pieces: string (hashes)</text>
<text text-anchor="start" x="469.5" y="-48" font-family="Helvetica,sans-Serif" font-size="10.00">+ name: string</text>
<text text-anchor="start" x="452.5" y="-37" font-family="Helvetica,sans-Serif" font-size="10.00">+ info_hash_str: string</text>
<text text-anchor="start" x="432" y="-26" font-family="Helvetica,sans-Serif" font-size="10.00">+ info_hash_raw: vector&lt;uint8&gt;</text>
</g>
<!-- PeerAddress -->
<g id="node2" class="node">
<title>PeerAddress</title>
<polygon fill="lightgrey" stroke="black" points="736.5,-96.5 653.5,-96.5 653.5,-43.5 736.5,-43.5 736.5,-96.5"/>
<polygon fill="#fff8dc" stroke="transparent" points="661.5,-47.5 661.5,-92.5 728.5,-92.5 728.5,-47.5 661.5,-47.5"/>
<polygon fill="none" stroke="black" points="662,-75 662,-92 729,-92 729,-75 662,-75"/>
<text text-anchor="start" x="665" y="-82" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="10.00">PeerAddress</text>
<polygon fill="none" stroke="black" points="662,-47 662,-75 729,-75 729,-47 662,-47"/>
<text text-anchor="start" x="670.5" y="-64" font-family="Helvetica,sans-Serif" font-size="10.00">+ ip: string</text>
<text text-anchor="start" x="665" y="-53" font-family="Helvetica,sans-Serif" font-size="10.00">+ port: uint16</text>
</g>
<!-- Utils -->
<g id="node3" class="node">
<title>Utils</title>
<polygon fill="lightgrey" stroke="black" points="348,-124 216,-124 216,-16 348,-16 348,-124"/>
<polygon fill="#e6f3ff" stroke="transparent" points="224,-20 224,-120 340,-120 340,-20 224,-20"/>
<polygon fill="none" stroke="black" points="224,-103 224,-120 340,-120 340,-103 224,-103"/>
<text text-anchor="start" x="227" y="-110" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="10.00">Utils</text>
<polygon fill="none" stroke="black" points="224,-20 224,-103 340,-103 340,-20 224,-20"/>
<text text-anchor="start" x="260.5" y="-92" font-family="Helvetica,sans-Serif" font-size="10.00">+ ToHex()</text>
<text text-anchor="start" x="251.5" y="-81" font-family="Helvetica,sans-Serif" font-size="10.00">+ UrlEncode()</text>
<text text-anchor="start" x="240" y="-70" font-family="Helvetica,sans-Serif" font-size="10.00">+ GeneratePeerId()</text>
<text text-anchor="start" x="228.5" y="-59" font-family="Helvetica,sans-Serif" font-size="10.00">+ CalculateSHA1(string)</text>
<text text-anchor="start" x="227" y="-48" font-family="Helvetica,sans-Serif" font-size="10.00">+ CalculateSHA1(vector)</text>
<text text-anchor="start" x="251" y="-37" font-family="Helvetica,sans-Serif" font-size="10.00">+ UrlDecode()</text>
<text text-anchor="start" x="247" y="-26" font-family="Helvetica,sans-Serif" font-size="10.00">+ HexToBytes()</text>
</g>
<!-- BEncoder -->
<g id="node4" class="node">
<title>BEncoder</title>
<polygon fill="lightgrey" stroke="black" points="144,-120.5 16,-120.5 16,-19.5 144,-19.5 144,-120.5"/>
<polygon fill="#e6f3ff" stroke="transparent" points="24,-23.5 24,-116.5 136,-116.5 136,-23.5 24,-23.5"/>
<polygon fill="none" stroke="black" points="24,-99 24,-116 136,-116 136,-99 24,-99"/>
<text text-anchor="start" x="27" y="-106" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="10.00">BEncoder</text>
<polygon fill="none" stroke="black" points="24,-23 24,-99 136,-99 136,-23 24,-23"/>
<text text-anchor="start" x="59" y="-89" font-family="Helvetica,sans-Serif" font-style="italic" font-size="10.00">Stateless</text>
<text text-anchor="start" x="27" y="-79" font-family="Helvetica,sans-Serif" font-size="10.00">+ Encode(json) &#45;&gt; string</text>
<text text-anchor="start" x="27" y="-69" font-family="Helvetica,sans-Serif" font-size="10.00">+ Decode(string) &#45;&gt; json</text>
<text text-anchor="start" x="55.5" y="-59" font-family="Helvetica,sans-Serif" font-size="10.00">&#45; ParseInt()</text>
<text text-anchor="start" x="48" y="-49" font-family="Helvetica,sans-Serif" font-size="10.00">&#45; ParseString()</text>
<text text-anchor="start" x="53" y="-39" font-family="Helvetica,sans-Serif" font-size="10.00">&#45; ParseList()</text>
<text text-anchor="start" x="52" y="-29" font-family="Helvetica,sans-Serif" font-size="10.00">&#45; ParseDict()</text>
</g>
<!-- Network -->
<g id="node5" class="node">
<title>Network</title>
<polygon fill="lightgrey" stroke="black" points="979,-118.5 809,-118.5 809,-21.5 979,-21.5 979,-118.5"/>
<polygon fill="#ffe6e6" stroke="transparent" points="817,-25.5 817,-114.5 971,-114.5 971,-25.5 817,-25.5"/>
<polygon fill="none" stroke="black" points="817,-97 817,-114 971,-114 971,-97 817,-97"/>
<text text-anchor="start" x="820" y="-104" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="10.00">Network</text>
<polygon fill="none" stroke="black" points="817,-25 817,-97 971,-97 971,-25 817,-25"/>
<text text-anchor="start" x="820" y="-86" font-family="Helvetica,sans-Serif" font-size="10.00">+ Connect(ip, port) (Timeout: 10s)</text>
<text text-anchor="start" x="824.5" y="-75" font-family="Helvetica,sans-Serif" font-size="10.00">+ ConnectHostname(host, port)</text>
<text text-anchor="start" x="844" y="-64" font-family="Helvetica,sans-Serif" font-size="10.00">+ SendAll(sock, buffer)</text>
<text text-anchor="start" x="843.5" y="-53" font-family="Helvetica,sans-Serif" font-size="10.00">+ RecvAll(sock, buffer)</text>
<text text-anchor="start" x="838.5" y="-42" font-family="Helvetica,sans-Serif" font-size="10.00">+ RecvUntilClosed(sock)</text>
<text text-anchor="start" x="844" y="-31" font-family="Helvetica,sans-Serif" font-size="10.00">+ ReadMessage(sock)</text>
</g>
<!-- Client -->
<g id="node6" class="node">
<title>Client</title>
<polygon fill="lightgrey" stroke="black" points="681,-380 469,-380 469,-217 681,-217 681,-380"/>
<polygon fill="#d6ffd6" stroke="transparent" points="477,-221 477,-376 673,-376 673,-221 477,-221"/>
<polygon fill="none" stroke="black" points="477,-358.5 477,-375.5 673,-375.5 673,-358.5 477,-358.5"/>
<text text-anchor="start" x="480" y="-365.5" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="10.00">Client</text>
<polygon fill="none" stroke="black" points="477,-312.5 477,-358.5 673,-358.5 673,-312.5 477,-312.5"/>
<text text-anchor="start" x="552" y="-348.5" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="10.00">&#45;&#45; Setup &#45;&#45;</text>
<text text-anchor="start" x="532.5" y="-338.5" font-family="Helvetica,sans-Serif" font-size="10.00">+ LoadTorrent(path)</text>
<text text-anchor="start" x="523.5" y="-328.5" font-family="Helvetica,sans-Serif" font-size="10.00">+ GetPeers(TorrentInfo)</text>
<text text-anchor="start" x="480" y="-318.5" font-family="Helvetica,sans-Serif" font-size="10.00">+ PerformHandshake(support_extensions?)</text>
<polygon fill="none" stroke="black" points="477,-276.5 477,-312.5 673,-312.5 673,-276.5 477,-276.5"/>
<text text-anchor="start" x="495.5" y="-302.5" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="10.00">&#45;&#45; Download &#45;&#45;</text>
<text text-anchor="start" x="484.5" y="-292.5" font-family="Helvetica,sans-Serif" font-size="10.00">+ WaitForUnchoke()</text>
<text text-anchor="start" x="480" y="-282.5" font-family="Helvetica,sans-Serif" font-size="10.00">+ DownloadPiece(idx)</text>
<polygon fill="none" stroke="black" points="477,-220.5 477,-276.5 673,-276.5 673,-220.5 477,-220.5"/>
<text text-anchor="start" x="480" y="-266.5" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="10.00">&#45;&#45; Extension/Magnet (BEP 09/10) &#45;&#45;</text>
<text text-anchor="start" x="494" y="-256.5" font-family="Helvetica,sans-Serif" font-size="10.00">+ SendExtensionHandshake()</text>
<text text-anchor="start" x="487" y="-246.5" font-family="Helvetica,sans-Serif" font-size="10.00">+ ReceiveExtensionHandshake()</text>
<text text-anchor="start" x="502" y="-236.5" font-family="Helvetica,sans-Serif" font-size="10.00">+ SendMetadataRequest()</text>
<text text-anchor="start" x="491.5" y="-226.5" font-family="Helvetica,sans-Serif" font-size="10.00">+ ReceiveMetadataResponse()</text>
</g>
<!-- Client&#45;&gt;TorrentInfo -->
<g id="edge7" class="edge">
<title>Client&#45;&gt;TorrentInfo</title>
<path fill="none" stroke="#555555" d="M548.6,-216.69C539.69,-189.43 529.89,-159.42 521.51,-133.77"/>
<polygon fill="#555555" stroke="#555555" points="524.8,-132.58 518.37,-124.16 518.15,-134.76 524.8,-132.58"/>
<text text-anchor="middle" x="562.5" y="-170.1" font-family="Helvetica,sans-Serif" font-size="8.00">Creates/Reads</text>
</g>
<!-- Client&#45;&gt;PeerAddress -->
<g id="edge8" class="edge">
<title>Client&#45;&gt;PeerAddress</title>
<path fill="none" stroke="#555555" d="M617.81,-216.69C637.98,-178.63 660.97,-135.23 676.58,-105.77"/>
<polygon fill="#555555" stroke="#555555" points="679.79,-107.19 681.37,-96.72 673.6,-103.92 679.79,-107.19"/>
<text text-anchor="middle" x="681.5" y="-170.1" font-family="Helvetica,sans-Serif" font-size="8.00">Parses from Tracker</text>
</g>
<!-- Client&#45;&gt;Utils -->
<g id="edge6" class="edge">
<title>Client&#45;&gt;Utils</title>
<path fill="none" stroke="blue" d="M468.79,-255.03C429.89,-236.15 387.29,-211.28 354,-181 338.98,-167.33 325.7,-149.87 314.77,-132.91"/>
<polygon fill="blue" stroke="blue" points="317.53,-130.74 309.27,-124.11 311.6,-134.45 317.53,-130.74"/>
<text text-anchor="start" x="354" y="-174.6" font-family="Helvetica,sans-Serif" font-size="8.00">SHA1 hashing</text>
<text text-anchor="middle" x="380" y="-165.6" font-family="Helvetica,sans-Serif" font-size="8.00">PeerID gen</text>
</g>
<!-- Client&#45;&gt;Utils -->
<!-- Client&#45;&gt;BEncoder -->
<g id="edge5" class="edge">
<title>Client&#45;&gt;BEncoder</title>
<path fill="none" stroke="blue" d="M468.74,-254.02C430.09,-238.89 385.86,-222.38 345,-209 299.92,-194.24 286.86,-196.43 242,-181 213.74,-171.28 205.51,-170.56 180,-155 166.74,-146.91 153.42,-137.14 141.02,-127.16"/>
<polygon fill="blue" stroke="blue" points="142.96,-124.23 133.01,-120.59 138.52,-129.64 142.96,-124.23"/>
<text text-anchor="start" x="242" y="-174.6" font-family="Helvetica,sans-Serif" font-size="8.00">Encodes requests</text>
<text text-anchor="middle" x="281.5" y="-165.6" font-family="Helvetica,sans-Serif" font-size="8.00">Decodes tracker/meta</text>
</g>
<!-- Client&#45;&gt;Network -->
<g id="edge4" class="edge">
<title>Client&#45;&gt;Network</title>
<path fill="none" stroke="red" d="M681.22,-222.08C726.16,-190.17 777.46,-153.74 818.44,-124.65"/>
<polygon fill="red" stroke="red" points="820.63,-127.39 826.75,-118.75 816.57,-121.68 820.63,-127.39"/>
<text text-anchor="middle" x="771.5" y="-170.1" font-family="Helvetica,sans-Serif" font-size="8.00">uses</text>
</g>
<!-- HandshakeDesc -->
<g id="node8" class="node">
<title>HandshakeDesc</title>
<polygon fill="#ffffcc" stroke="black" points="1143,-101 1051,-101 1051,-39 1149,-39 1149,-95 1143,-101"/>
<polyline fill="none" stroke="black" points="1143,-101 1143,-95 "/>
<polyline fill="none" stroke="black" points="1149,-95 1143,-95 "/>
<text text-anchor="start" x="1059" y="-90.6" font-family="Helvetica,sans-Serif" font-size="8.00">Handshake Packet:</text>
<text text-anchor="start" x="1059" y="-81.6" font-family="Helvetica,sans-Serif" font-size="8.00">1. PStrLen (19)</text>
<text text-anchor="start" x="1059" y="-72.6" font-family="Helvetica,sans-Serif" font-size="8.00">2. &quot;BitTorrent Protocol&quot;</text>
<text text-anchor="start" x="1059" y="-63.6" font-family="Helvetica,sans-Serif" font-size="8.00">3. Reserved (8 bytes)</text>
<text text-anchor="start" x="1059" y="-54.6" font-family="Helvetica,sans-Serif" font-size="8.00">4. InfoHash</text>
<text text-anchor="start" x="1059" y="-45.6" font-family="Helvetica,sans-Serif" font-size="8.00">5. PeerID</text>
</g>
<!-- Client&#45;&gt;HandshakeDesc -->
<g id="edge9" class="edge">
<title>Client&#45;&gt;HandshakeDesc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M681.17,-275.02C771.39,-253.02 902.23,-214.12 1005,-155 1026.68,-142.53 1047.83,-124.59 1064.64,-108.48"/>
<polygon fill="#555555" stroke="#555555" points="1067.35,-110.73 1072.05,-101.24 1062.45,-105.73 1067.35,-110.73"/>
<text text-anchor="middle" x="994" y="-170.1" font-family="Helvetica,sans-Serif" font-size="8.00">Builds</text>
</g>
<!-- MagnetFlow -->
<g id="node9" class="node">
<title>MagnetFlow</title>
<polygon fill="#ffffcc" stroke="black" points="1330.5,-96.5 1221.5,-96.5 1221.5,-43.5 1336.5,-43.5 1336.5,-90.5 1330.5,-96.5"/>
<polyline fill="none" stroke="black" points="1330.5,-96.5 1330.5,-90.5 "/>
<polyline fill="none" stroke="black" points="1336.5,-90.5 1330.5,-90.5 "/>
<text text-anchor="start" x="1229.5" y="-86.1" font-family="Helvetica,sans-Serif" font-size="8.00">Magnet Logic Flow:</text>
<text text-anchor="start" x="1229.5" y="-77.1" font-family="Helvetica,sans-Serif" font-size="8.00">1. Ext Handshake (ID 20)</text>
<text text-anchor="start" x="1229.5" y="-68.1" font-family="Helvetica,sans-Serif" font-size="8.00">2. Request Metadata (ID 0)</text>
<text text-anchor="start" x="1229.5" y="-59.1" font-family="Helvetica,sans-Serif" font-size="8.00">3. Recv Dictionary (ID 1)</text>
<text text-anchor="start" x="1229.5" y="-50.1" font-family="Helvetica,sans-Serif" font-size="8.00">4. Parse to TorrentInfo</text>
</g>
<!-- Client&#45;&gt;MagnetFlow -->
<g id="edge10" class="edge">
<title>Client&#45;&gt;MagnetFlow</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M681.13,-288.78C807.37,-274.88 1021.56,-239.96 1185,-155 1209.47,-142.28 1232.62,-121.73 1249.83,-104.14"/>
<polygon fill="#555555" stroke="#555555" points="1252.45,-106.47 1256.82,-96.82 1247.39,-101.63 1252.45,-106.47"/>
<text text-anchor="middle" x="1187.5" y="-170.1" font-family="Helvetica,sans-Serif" font-size="8.00">magnet_download</text>
</g>
<!-- Main -->
<g id="node7" class="node">
<title>Main</title>
<polygon fill="black" stroke="black" points="317.21,-501.54 317.21,-516.46 279.6,-527 226.4,-527 188.79,-516.46 188.79,-501.54 226.4,-491 279.6,-491 317.21,-501.54"/>
<text text-anchor="start" x="206.34" y="-506.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="white">int main(argc, argv)</text>
</g>
<!-- Main&#45;&gt;Utils -->
<g id="edge3" class="edge">
<title>Main&#45;&gt;Utils</title>
<path fill="none" stroke="#555555" stroke-dasharray="5,2" d="M254.14,-490.87C258.04,-432.06 271.02,-236.39 277.8,-134.27"/>
<polygon fill="#555555" stroke="#555555" points="281.31,-134.3 278.48,-124.09 274.32,-133.83 281.31,-134.3"/>
<text text-anchor="middle" x="309" y="-296.6" font-family="Helvetica,sans-Serif" font-size="8.00">Cmd: magnet_parse</text>
</g>
<!-- Main&#45;&gt;BEncoder -->
<g id="edge2" class="edge">
<title>Main&#45;&gt;BEncoder</title>
<path fill="none" stroke="#555555" stroke-dasharray="5,2" d="M240.41,-490.86C227.02,-472.03 205.89,-440.52 192,-411 147.55,-316.53 113.21,-199.64 94.85,-130.43"/>
<polygon fill="#555555" stroke="#555555" points="98.19,-129.36 92.26,-120.57 91.42,-131.14 98.19,-129.36"/>
<text text-anchor="middle" x="216.5" y="-296.6" font-family="Helvetica,sans-Serif" font-size="8.00">Cmd: decode</text>
</g>
<!-- Main&#45;&gt;Client -->
<g id="edge1" class="edge">
<title>Main&#45;&gt;Client</title>
<path fill="none" stroke="black" stroke-width="2" d="M279.35,-490.94C318.59,-465.53 394.77,-416.2 459.97,-373.98"/>
<polygon fill="black" stroke="black" stroke-width="2" points="462.19,-376.71 468.68,-368.34 458.39,-370.84 462.19,-376.71"/>
<text text-anchor="start" x="385" y="-448.6" font-family="Helvetica,sans-Serif" font-size="8.00">Invoke Cmds:</text>
<text text-anchor="start" x="385" y="-439.6" font-family="Helvetica,sans-Serif" font-size="8.00">&#45; info</text>
<text text-anchor="start" x="385" y="-430.6" font-family="Helvetica,sans-Serif" font-size="8.00">&#45; peers</text>
<text text-anchor="start" x="385" y="-421.6" font-family="Helvetica,sans-Serif" font-size="8.00">&#45; download</text>
</g>
</g>
</svg>
